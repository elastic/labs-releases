# coding: utf-8

from nightmare import cast

MAGIC = 0xFF0424
SEPARATOR = b"|\x1e\x1e\x1f|"


def build_command_packet(command_id: int, command_data: bytes) -> bytes:
    return build_packet(cast.p32(command_id.to_bytes) + command_data)


def build_packet(data: bytes) -> bytes:
    packet = cast.p32(MAGIC)
    packet += cast.p32(len(data))
    packet += data
    return packet
